<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>Bootstrap Tree with Checkboxes</title>
    <link rel="stylesheet" href="../bootstrap-5.3.0/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="tree.min.css">
    <link rel="stylesheet" href="/assets/fonts/font-awesome/4.7.0.css">

    <script src="../jquery.1.11.3/jquery.js"></script>
    <script src="../bootstrap-5.3.0/bootstrap.bundle.js"></script>
    <script type="text/javascript" src="tree.min.js"></script>

    <script type="text/javascript">
        let data = [
            {k: 1, p: 0, n: "World", d: "World"},
            {k: 2, p: 1, n: "Asia", d: "Asia"},
            {k: 3, p: 2, n: "CH", d: "China"},
            {k: 4, p: 2, n: "JA", d: "Japan"},
            {k: 5, p: 2, n: "MO", d: "Mongolia"},
            {k: 16, p: 1, n: "EU", d: "Europe"},
            {k: 17, p: 16, n: "UK", d: "England"},
            {k: 18, p: 16, n: "GE", d: "Germany"},
            {k: 19, p: 16, n: "BU", d: "Bulgaria"},
            {k: 20, p: 16, n: "PO", d: "Poland"},
            {k: 6, p: 1, n: "North America", d: "North America"},
            {k: 7, p: 6, n: "US", d: "United States"},
            {k: 8, p: 7, n: "CAL", d: "California"},
            {k: 9, p: 7, n: "FlO", d: "Florida"},
            {k: 10, p: 6, n: "CA", d: "Canada"},
            {k: 11, p: 12, n: "ME", d: "Mexico"},
            {k: 12, p: 1, n: "South America", d: "South America"},
            {k: 13, p: 12, n: "BR", d: "Brazil"},
            {k: 14, p: 12, n: "AR", d: "Argentina"},
            {k: 15, p: 12, n: "CO", d: "Colombia"}
        ];


        //region function tree_actions(...)
        function tree_actions(event, target_node, dest_node) {
            if (event === 'click') {
                alert(target_node.d + ' Activated');
            } else if (event === 'move') {
                alert(' Moving ' + target_node.d + ' to ' + dest_node.d);
            }
        }
        //endregion

        //region function rebuild_tree(...)
        function rebuild_tree(data) {
            const $tree = $(".tree");
            $tree.tree('create', data, tree_actions)
            let root = $tree.tree('get-root');
            alert('Root node is ' + root.d);
            $tree.tree('set-active-node', root.k);
            let node = $tree.tree('get-active-node');
            alert('Active node is ' + node.d);
        }
        //endregion

        $(function () {
            rebuild_tree(data);
        });
    </script>

</head>
<body>
    <ul>
        <li>Click a node</li>
        <li>Drag a nod</li>
    </ul>
    <div class="tree"></div>
</body>
</html>
